---
import { slugify } from '../utils';
import type { CollectionEntry } from 'astro:content';

type BlogPost = CollectionEntry<'blog'>;
const { post }: { post: BlogPost } = Astro.props;
---

<div class="transition-colors duration-300 hover:bg-blue-200 rounded">
  {/*
    Explanation of the grid:
    - Default (mobile): `grid-cols-[auto_1fr]` => 2 columns
      1) Tags
      2) Title
      Then the description is forced onto a new row via `col-span-2`.
    - On medium screens (`md:`): `grid-cols-[150px_1fr_1fr]` => 3 columns
      1) Tags
      2) Title
      3) Description
    - `items-baseline` aligns text nicely along the baseline.
  */}
  <div
    class="
      grid 
      border-b border-zinc-700 
      py-2 
      items-baseline 
      gap-2

      grid-cols-[auto_1fr]
      md:grid-cols-[150px_1fr_1fr] 
      md:gap-4
    "
  >
    <!-- Left column (tags) on desktop; first col on mobile -->
    <div class="flex flex-wrap gap-2 items-baseline">
      {post.data.tags?.map((tag: string) => (
        <a
          class="
            border-zinc-300 rounded-2xl
            text-[14px] text-zinc-700 no-underline
            px-2 py-0.5
            transition-all duration-700
            hover:border-zinc-700
          "
          href={`/tags/${slugify(tag)}`}
        >
          {tag}
        </a>
      ))}
    </div>

    <!-- Middle column (title) on desktop; second col on mobile -->
    <div>
      <h3 class="text-[24px] text-[#0000FF] font-medium normal-case">
        <a href={`/${post.slug}/`}>{post.data.title}</a>
      </h3>
    </div>

    <!-- Right column (description) on desktop; full-width new row on mobile -->
    <div class="col-span-2 md:col-span-1 md:col-start-3">
      <p class="text-[14px] mb-4 line-clamp-2 normal-case">
        {post.data.description || post.data.excerpt || 'No preview available...'}
      </p>
    </div>
  </div>
</div>
